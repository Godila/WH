# WMS Marketplace

## What This Is

Система складского учёта (WMS) для фулфилмента маркетплейсов РФ. Заменяет Excel-таблицы для учёта товаров на двух складах — основной (годный товар) и брак. Автоматически пересчитывает остатки при любых операциях, ведёт журнал всех движений.

**Кто использует:** менеджеры фулфилмента (2-3 человека)
**Что заменяет:** Excel с ручным пересчётом остатков

## Core Value

Точные остатки на фулфилменте без ручного пересчёта и ошибок.

## Requirements

### Validated

(None yet — ship to validate)

### Active

- [ ] 9 типов операций перемещения товара с автоматическим пересчётом остатков
- [ ] Два склада: Stock (годный) и DefectStock (брак)
- [ ] Журнал всех движений с фильтрацией и пагинацией
- [ ] Импорт товаров из Excel
- [ ] JWT авторизация
- [ ] Web-интерфейс для работы менеджеров

### Out of Scope

- Учёт остатков на маркетплейсах (WB, Ozon) — только свои склады фулфилмента
- Мобильное приложение — web-first
- Интеграция с API маркетплейсов — вручную вводим операции
- Многопользовательские роли/права — пока все равны

## Context

**Бизнес-модель:**
- Фулфилмент для продавцов на WB и Ozon
- Товары приходят от поставщиков, хранятся на складе
- Отгружаются в РЦ маркетплейсов
- Возвраты и брак обрабатываются внутри

**Текущая боль:**
- Excel — ошибки пересчёта, нет истории, долгий ввод
- Непонятно кто и когда что делал с остатками

**9 операций:**
| Операция | Эффект |
|---|---|
| RECEIPT | Stock += n |
| RECEIPT_DEFECT | DefectStock += n |
| SHIPMENT_RC | Stock -= n (требует РЦ) |
| RETURN_PICKUP | Stock += n (требует источник) |
| RETURN_DEFECT | DefectStock += n (требует источник) |
| SELF_PURCHASE | Stock += n (требует источник) |
| WRITE_OFF | Stock -= n, DefectStock += n |
| RESTORATION | DefectStock -= n, Stock += n |
| UTILIZATION | DefectStock -= n |

**Идентификаторы товара:**
- Barcode — уникален, для работы с маркетплейсами
- GTIN — уникален, для внутренних процессов
- Связь 1:1 (один товар = один баркод = один GTIN)

## Constraints

- **Timeline**: 1 неделя — срочно
- **Users**: 2-3 менеджера
- **Deploy**: Docker на VPS (localhost или сервер)
- **Stack Backend**: FastAPI, SQLAlchemy 2.0 (async), PostgreSQL, Alembic, Pydantic, JWT
- **Stack Frontend**: React 18, Vite, TypeScript, Ant Design, Zustand, Axios
- **Data**: Есть реальный Excel с товарами для импорта

## Key Decisions

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| GTIN + Barcode оба уникальны | Баркод для МП, GTIN для внутренних процессов | — Pending |
| Только свои склады | НЕ отслеживаем остатки маркетплейсов | — Pending |
| 9 атомарных операций | Покрывают все бизнес-сценарии фулфилмента | — Pending |
| 6 фаз MVP | Полный функционал за неделю | — Pending |

---
*Last updated: 2026-02-18 after initialization*
